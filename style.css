/* =================================================================
  Chakra Oracle UI - V2 | UI/UX Enhancement by Gemini
  =================================================================
  * Description: An enhanced version focusing on creating a deeply
  * immersive, beautiful, and magical user experience. Improvements
  * touch on typography, color, animation, depth, and interactivity.
  ================================================================= */

/* --- SECTION 1: CORE ARCHITECTURE & THEME API --- */
/* Centralized custom properties for easy theming and maintenance. */
:root {
  /* Sizing & Layout */
  --cursor-size: 32px;
  --z-index-smoke: 1;
  --z-index-content: 10;
  --z-index-cursor: 9999;
  
  /* Colors - Refined palette for more depth */
  --color-bg-deep: #121212; /* Darker base for more contrast */
  --color-bg-stone: #1a1a1a;
  --color-bg-light: #2a2a2a;
  --color-accent-bronze: #a97142;
  --color-accent-glow: #e09658;
  --color-text-primary: #d1d1d1;
  --color-text-muted: #8a8a8a;
  
  /* Typography */
  --font-title: 'Allura', cursive;
  --font-body: 'Kurale', serif;

  /* Animation & Transitions - Tuned for smoother feel */
  --duration-cursor-follow: 0.1s;
  --duration-cursor-active: 0.3s;
  --duration-interaction: 0.4s;
  --duration-screen-transition: 0.8s;
  --easing-cubic: cubic-bezier(0.645, 0.045, 0.355, 1); /* Professional ease */
  --easing-out: ease-out;

  /* Mouse tracking for parallax effects */
  --mouse-x: 0px;
  --mouse-y: 0px;
}

/* --- SECTION 2: BASE & ATMOSPHERIC STYLING --- */

/* Universal Reset */
*, *::before, *::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  height: 100%;
  width: 100%;
  overflow: hidden; /* Prevent all native scrolling */
  font-family: var(--font-body);
}

body {
  display: flex;
  justify-content: center;
  align-items: center;
  color: var(--color-text-primary);
  background-color: var(--color-bg-deep);
  /* ENHANCEMENT: Layered background for more texture and depth.
    - Base deep color
    - Subtle noise texture for a less "digital" feel
    - Radial gradient for focus
    - SVG pattern for mystique
    - Vignette to darken edges and draw focus to the center
  */
  background-image:
    radial-gradient(ellipse at center, transparent 60%, rgba(0,0,0,0.7)), /* Vignette */
    radial-gradient(ellipse at center, var(--color-bg-light) 0%, var(--color-bg-stone) 75%),
    url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.02'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"),
    url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAQEklEQVR42mNgoAYwY2BgYGBiYGBgZGBgZGDgYGBgYGFgY2BgaGDgYGBgYGBhYGBgYGFgYGBgYGBgYGBgYAAAqQgAAS6A4AcCR3AAAAAASUVORK5CYII='); /* Subtle noise */
  
  perspective: 1200px; /* Enhanced perspective for 3D transforms */
}

/*
  ENHANCEMENT: More dynamic and organic "mystical smoke" effect.
  Reacts subtly to mouse movement for an interactive feel.
*/
body::before, body::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: var(--z-index-smoke);
  pointer-events: none;
  will-change: transform, opacity;
  /* Use 3D transform for better GPU acceleration */
  transform: translate3d(calc(var(--mouse-x) * -0.01), calc(var(--mouse-y) * -0.01), 0);
  transition: transform 0.3s var(--easing-out);
}

body::before { /* Foreground smoke */
  background: radial-gradient(circle at 50% 50%, rgba(50, 50, 50, 0.5), transparent 60%);
  animation: smokeDrift 25s var(--easing-cubic) infinite;
}

body::after { /* Background smoke */
  background: radial-gradient(circle at 20% 80%, rgba(40, 40, 40, 0.4), transparent 70%);
  animation: smokeDrift 40s var(--easing-cubic) infinite reverse;
}

@keyframes smokeDrift {
  0%   { transform: translate3d(calc(var(--mouse-x) * -0.01), calc(var(--mouse-y) * -0.01), 0) scale(1.1); opacity: 0.5; }
  50%  { transform: translate3d(calc(var(--mouse-x) * -0.01 - 60px), calc(var(--mouse-y) * -0.01 + 30px), 0) scale(1.3); opacity: 0.6; }
  100% { transform: translate3d(calc(var(--mouse-x) * -0.01), calc(var(--mouse-y) * -0.01), 0) scale(1.1); opacity: 0.5; }
}

/* --- SECTION 3: CUSTOM CURSOR --- */
/* A highly performant and accessible custom cursor. */
@media (pointer: fine) {
  body.custom-cursor-active,
  body.custom-cursor-active * {
    cursor: none;
  }

  #cursor-container {
    position: fixed;
    top: 0;
    left: 0;
    width: var(--cursor-size);
    height: var(--cursor-size);
    z-index: var(--z-index-cursor);
    pointer-events: none;
    /* ENHANCEMENT: Use individual transforms for smoother performance */
    transform: translate(var(--mouse-x), var(--mouse-y)) translate(-50%, -50%);
    transition: transform var(--duration-cursor-follow) var(--easing-out);
    will-change: transform;
  }

  .chakra-cursor {
    width: 100%;
    height: 100%;
    transition: transform var(--duration-cursor-active) var(--easing-cubic);
    will-change: transform;
  }

  /* GPU-accelerated glow effect using a pseudo-element */
  .chakra-cursor::after {
    content: '';
    position: absolute;
    top: -25%;
    left: -25%;
    width: 150%;
    height: 150%;
    border-radius: 50%;
    box-shadow: 0 0 15px var(--color-accent-glow), 0 0 30px var(--color-accent-glow);
    opacity: 0;
    transition: opacity var(--duration-cursor-active) var(--easing-cubic);
    will-change: opacity;
  }
  
  /* Active state for hovered interactive elements */
  #cursor-container.active .chakra-cursor {
    animation: rotateChakra 4s linear infinite;
  }
  #cursor-container.active .chakra-cursor::after {
    opacity: 0.9;
  }
  @keyframes rotateChakra {
    to { transform: rotate(360deg); }
  }

  /* Accessibility: Respect user's preference for reduced motion */
  @media (prefers-reduced-motion: reduce) {
    #cursor-container, .chakra-cursor, .chakra-cursor::after {
      transition: none;
    }
    #cursor-container.active .chakra-cursor {
      animation: none;
    }
    #cursor-container.active .chakra-cursor::after {
      opacity: 0.9; /* Provide static feedback */
    }
  }
}

/* --- SECTION 4: GENERAL CONTENT & LAYOUT --- */

/* Main content container for both screens */
.screen-container {
  position: relative;
  z-index: var(--z-index-content);
  width: 100%;
  max-width: 1200px;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 2rem;
  overflow-y: auto; /* Enable scrolling for content if it overflows */
}

/*
  ENHANCEMENT: More cinematic screen transitions.
  Combines opacity, scale, and blur for a dream-like effect.
*/
.screen {
  position: absolute;
  width: 95%;
  max-width: 800px;
  height: 90vh;
  max-height: 700px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  opacity: 0;
  visibility: hidden;
  filter: blur(10px);
  transform: scale(0.95);
  transition: opacity var(--duration-screen-transition) var(--easing-cubic),
              transform var(--duration-screen-transition) var(--easing-cubic),
              filter var(--duration-screen-transition) var(--easing-cubic),
              visibility var(--duration-screen-transition);
  will-change: opacity, transform, filter;
}

.screen.active {
  opacity: 1;
  visibility: visible;
  transform: scale(1);
  filter: blur(0);
}

.screen.exiting {
  opacity: 0;
  transform: scale(1.05);
  filter: blur(10px);
}

/* --- SECTION 5: TITLE SCREEN SPECIFIC STYLES --- */

/* ENHANCEMENT: Title with a subtle shimmer animation and more pronounced shadow
  for a divine, ethereal quality.
*/
.game-title {
  font-family: var(--font-title);
  font-size: clamp(4rem, 12vw, 8rem);
  font-weight: 400;
  color: transparent; /* Make text transparent */
  background: linear-gradient(45deg, var(--color-text-muted), var(--color-text-primary) 50%, var(--color-text-muted));
  background-size: 200% 200%;
  background-clip: text;
  -webkit-background-clip: text;
  text-shadow: 0 0 20px rgba(0,0,0,0.8);
  margin-bottom: 1rem;
  animation: shimmer 10s ease infinite;
  will-change: background-position;
}
@keyframes shimmer {
    0%{background-position:0% 50%}
    50%{background-position:100% 50%}
    100%{background-position:0% 50%}
}


.mandala-container {
  position: relative;
  width: clamp(280px, 90vw, 550px);
  height: clamp(280px, 90vw, 550px);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  border-radius: 50%;
  transition: transform 0.3s var(--easing-out), 
              background-color var(--duration-interaction) var(--easing-cubic), 
              box-shadow var(--duration-interaction) var(--easing-cubic);
  will-change: transform, background-color, box-shadow;
}

.mandala-svg {
  width: 100%;
  height: 100%;
  stroke: var(--color-accent-bronze);
  fill: none;
  stroke-width: 0.5;
  stroke-linecap: round;
  stroke-linejoin: round;
  animation: breath 8s var(--easing-cubic) infinite;
  will-change: transform, filter;
}

/* Mandala Animations */
@keyframes breath {
  0%, 100% { transform: scale(0.98); filter: drop-shadow(0 0 4px var(--color-accent-glow)); opacity: 0.8; }
  50% { transform: scale(1); filter: drop-shadow(0 0 12px var(--color-accent-glow)); opacity: 1; }
}
.mandala-rotate-1 { animation: rotate 120s linear infinite; transform-origin: center; }
.mandala-rotate-2 { animation: rotate 80s linear infinite reverse; transform-origin: center; }
.mandala-rotate-3 { animation: rotate 40s linear infinite; transform-origin: center; }
@keyframes rotate { to { transform: rotate(360deg); } }

.mandala-link:hover .mandala-container {
  background-color: rgba(224, 150, 88, 0.1);
  box-shadow: 0 0 30px 10px rgba(224, 150, 88, 0.2);
}

.cta-text {
  margin-top: 1.5rem;
  font-size: clamp(1rem, 3vw, 1.2rem);
  letter-spacing: 0.2em;
  text-transform: uppercase;
  opacity: 0.7;
  transition: opacity var(--duration-interaction), transform 0.3s var(--easing-out);
  will-change: opacity, transform;
}

.mandala-link:hover .cta-text {
  opacity: 1;
  text-shadow: 0 0 10px var(--color-accent-glow);
}

/* Parallax effect for title screen elements */
.game-title, .cta-text {
    transform: translate3d(calc(var(--mouse-x) * 0.05), calc(var(--mouse-y) * 0.05), 0);
}
.mandala-container {
    transform: translate3d(calc(var(--mouse-x) * 0.03), calc(var(--mouse-y) * 0.03), 0);
}


/* --- SECTION 6: QUIZ & RESULT SCREEN STYLES --- */

.screen-title {
  font-family: var(--font-title);
  font-size: clamp(3rem, 10vw, 5rem);
  font-weight: 400;
  text-shadow: 0 0 15px rgba(0,0,0,0.7);
  margin-bottom: 2rem;
}

.screen-subtitle {
  font-size: clamp(1rem, 2.5vw, 1.2rem);
  color: var(--color-text-muted);
  margin-bottom: 3rem;
  font-style: italic;
  max-width: 600px;
  line-height: 1.6;
}

.options-grid {
  display: flex;
  flex-direction: column;
  gap: 1.2rem;
  width: 100%;
  max-width: 650px;
}
/* ENHANCEMENT: More engaging and beautiful options.
  - Border animates on hover.
  - Subtle glow emanates from the background.
  - Satisfying active (click) state.
*/
.option {
  position: relative;
  background-color: transparent;
  border: 1px solid var(--color-accent-bronze);
  color: var(--color-text-primary);
  padding: 1.2rem 1.5rem;
  transition: color var(--duration-interaction), transform 0.2s var(--easing-out);
  text-align: center;
  border-radius: 4px;
  font-size: clamp(0.9rem, 2vw, 1.1rem);
  letter-spacing: 0.05em;
  overflow: hidden; /* Needed for pseudo-element effect */
}
.option::before {
    content: '';
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: radial-gradient(circle, rgba(224, 150, 88, 0.15) 0%, transparent 80%);
    opacity: 0;
    transform: scale(0.5);
    transition: transform var(--duration-interaction) var(--easing-cubic), opacity var(--duration-interaction) var(--easing-cubic);
}
.option:hover {
  color: var(--color-accent-glow);
  transform: translateY(-4px) scale(1.02);
  border-color: var(--color-accent-glow);
}
.option:hover::before {
    transform: scale(1);
    opacity: 1;
}
.option:active {
    transform: translateY(-1px) scale(1);
}

/* Result Screen */
#result-screen .result-content {
  border: 1px solid var(--color-accent-bronze);
  border-radius: 10px;
  padding: 2.5rem;
  width: 100%;
  background: 
    radial-gradient(circle at 50% 0%, rgba(169, 113, 66, 0.15), transparent 70%),
    rgba(20, 20, 20, 0.7);
  backdrop-filter: blur(10px);
  box-shadow: 0 0 40px rgba(0,0,0,0.5);
  animation: fadeInResult 1.5s 0.5s var(--easing-cubic) forwards;
  opacity: 0;
}
@keyframes fadeInResult { to { opacity: 1; } }

.result-nakshatra-name {
  font-family: var(--font-title);
  font-size: clamp(3rem, 10vw, 5rem);
  color: var(--color-accent-glow);
  text-shadow: 0 0 10px var(--color-accent-glow), 0 0 30px var(--color-accent-bronze);
  margin-bottom: 0.5rem;
}

.result-symbol-deity {
  font-size: clamp(1rem, 2.5vw, 1.2rem);
  color: var(--color-text-muted);
  margin-bottom: 2rem;
  font-style: italic;
}

.result-profile {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1.5rem;
  text-align: left;
}

.profile-item {
  padding-bottom: 1rem;
  border-bottom: 1px dashed rgba(169, 113, 66, 0.3);
  line-height: 1.7; /* Increased for readability */
}
.profile-item:last-child { border-bottom: none; }

.profile-title {
  color: var(--color-accent-glow);
  font-weight: bold;
  margin-bottom: 0.5rem; /* Increased spacing */
  letter-spacing: 0.1em;
  text-transform: uppercase;
  font-size: 0.9rem;
}

/* Action/Restart Button */
#action-button {
  margin-top: 2rem;
  background: transparent;
  border: 1px solid var(--color-accent-bronze);
  color: var(--color-accent-glow);
  padding: 0.75rem 1.5rem;
  border-radius: 5px;
  font-size: 1rem;
  letter-spacing: 0.1em;
  transition: background-color var(--duration-interaction), color var(--duration-interaction), box-shadow var(--duration-interaction), transform 0.2s;
}
#action-button:hover {
  background-color: var(--color-accent-bronze);
  color: var(--color-bg-deep);
  box-shadow: 0 0 20px rgba(224, 150, 88, 0.3);
  transform: translateY(-3px);
}
#action-button:active {
    transform: translateY(-1px);
}


/* --- SECTION 7: RESPONSIVE DESIGN --- */

@media (max-width: 768px) {
  .game-title {
    font-size: clamp(3.5rem, 18vw, 6rem);
  }
  .mandala-container {
    width: clamp(280px, 85vw, 450px);
    height: clamp(280px, 85vw, 450px);
  }
  .cta-text {
    margin-top: 1.5rem;
  }
  /* Disable mouse-move parallax on devices that likely don't have a mouse */
  .game-title, .cta-text, .mandala-container, body::before, body::after {
      transform: none !important;
      transition: none;
  }
}
