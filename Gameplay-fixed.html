<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Samsara Saga - Journey Through Existence</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Jost:wght@300;400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="main.css">
    </head>
<body>
    <div id="cursor-container">
        <svg class="chakra-cursor" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#FFC58F" stroke-width="1">
            <circle cx="12" cy="12" r="10"/><g transform="translate(12,12)"><path d="M0,-10 L 2,-8 L 0,-6 L -2,-8 Z" transform="rotate(0)"/><path d="M0,-10 L 2,-8 L 0,-6 L -2,-8 Z" transform="rotate(30)"/><path d="M0,-10 L 2,-8 L 0,-6 L -2,-8 Z" transform="rotate(60)"/><path d="M0,-10 L 2,-8 L 0,-6 L -2,-8 Z" transform="rotate(90)"/><path d="M0,-10 L 2,-8 L 0,-6 L -2,-8 Z" transform="rotate(120)"/><path d="M0,-10 L 2,-8 L 0,-6 L -2,-8 Z" transform="rotate(150)"/><path d="M0,-10 L 2,-8 L 0,-6 L -2,-8 Z" transform="rotate(180)"/><path d="M0,-10 L 2,-8 L 0,-6 L -2,-8 Z" transform="rotate(210)"/><path d="M0,-10 L 2,-8 L 0,-6 L -2,-8 Z" transform="rotate(240)"/><path d="M0,-10 L 2,-8 L 0,-6 L -2,-8 Z" transform="rotate(270)"/><path d="M0,-10 L 2,-8 L 0,-6 L -2,-8 Z" transform="rotate(300)"/><path d="M0,-10 L 2,-8 L 0,-6 L -2,-8 Z" transform="rotate(330)"/></g><circle cx="12" cy="12" r="2" fill="#FFC58F"/>
        </svg>
    </div>

    <div class="page-transition">
        <div class="page-transition-content">
            <div class="page-transition-mandala">
                <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="45" stroke="#FFC58F" stroke-width="0.5" fill="none"/><circle cx="50" cy="50" r="30" stroke="#FFC58F" stroke-width="0.5" fill="none"/><circle cx="50" cy="50" r="15" stroke="#FFC58F" stroke-width="0.5" fill="none"/><circle cx="50" cy="50" r="5" fill="#FFC58F"/></svg>
            </div>
        </div>
    </div>

    <nav class="nav-bar">
        <a href="index.html" class="nav-link">
            <i class="fas fa-home"></i><span>Home</span>
        </a>
        <div class="nav-title">Samsara Saga</div>
        <a href="#" class="nav-link" id="menu-button">
            <i class="fas fa-bars"></i><span>Menu</span>
        </a>
    </nav>

    <div class="game-wrapper">
        <main id="game-area">
            <div id="story-container" class="card">
                <div id="story-text">
                    <p>The cycle turns...</p>
                    <p>You find yourself at the beginning of a new journey, your past lives echoing in the chambers of your consciousness like distant whispers.</p>
                    <p>The path ahead is shrouded in mist, but your <span class="highlight-text" id="nakshatra-name-display">Nakshatra</span> nature guides you forward, illuminating the way with its unique light.</p>
                </div>
                <div id="story-decoration" class="mandala-decoration">
                    <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="45"/><circle cx="50" cy="50" r="30"/><circle cx="50" cy="50" r="15"/><circle cx="50" cy="50" r="5"/></svg>
                </div>
            </div>
            <div id="choices-container">
                <button class="choice-button"><div class="choice-icon"><i class="fas fa-walking"></i></div><div class="choice-content">Begin your journey with mindful steps, observing the world around you.</div></button>
                <button class="choice-button"><div class="choice-icon"><i class="fas fa-eye"></i></div><div class="choice-content">Close your eyes and turn inward, seeking guidance from your inner wisdom.</div></button>
                <button class="choice-button"><div class="choice-icon"><i class="fas fa-comments"></i></div><div class="choice-content">Call out to see if anyone else is nearby who might offer guidance.</div></button>
            </div>
        </main>
        
        <aside id="game-sidebar">
            <div class="character-summary">
                <div class="character-symbol"><svg viewBox="0 0 100 100" id="character-symbol-svg"></svg></div>
                <h2 class="character-name" id="character-name">Jiva</h2>
            </div>
            <div class="sidebar-panel">
                <h3 class="status-panel-title">Spiritual Attributes</h3>
                <div class="stats-grid">
                    <div class="stat-item"><span class="stat-label">Karma</span><span id="karma-value" class="stat-value">0</span></div>
                    <div class="stat-item"><span class="stat-label">Sattva</span><span id="sattva-value" class="stat-value">0</span></div>
                    <div class="stat-item"><span class="stat-label">Rajas</span><span id="rajas-value" class="stat-value">0</span></div>
                    <div class="stat-item"><span class="stat-label">Tamas</span><span id="tamas-value" class="stat-value">0</span></div>
                </div>
            </div>
            <div class="sidebar-panel">
                <h3 class="status-panel-title">Elemental Alignment</h3>
                <div class="element-indicator" id="element-display"></div>
            </div>
            <div class="sidebar-panel">
                <h3 class="status-panel-title">Inventory</h3>
                <ul id="inventory-list"><li class="inventory-empty">(Empty)</li></ul>
            </div>
            <div class="game-controls">
                <button class="action-button" id="new-game-btn">Begin Anew</button>
            </div>
        </aside>
    </div>

    <div class="modal" id="game-menu-modal">
        <div class="modal-content">
            <div class="modal-header"><h2>Game Menu</h2><span class="close-modal">&times;</span></div>
            <div class="modal-body">
                <div class="menu-buttons">
                    <button class="menu-button" id="save-game-btn"><i class="fas fa-save"></i><span>Save Game</span></button>
                    <button class="menu-button" id="load-game-btn"><i class="fas fa-folder-open"></i><span>Load Game</span></button>
                    <button class="menu-button" id="settings-btn"><i class="fas fa-cog"></i><span>Settings</span></button>
                    <button class="menu-button" id="help-btn"><i class="fas fa-question-circle"></i><span>Help</span></button>
                    <button class="menu-button" id="exit-game-btn"><i class="fas fa-sign-out-alt"></i><span>Exit to Main Menu</span></button>
                </div>
            </div>
        </div>
    </div>

    <div id="notification-container"></div>
    
    <script>
        // Data and Logic... (Omitted for brevity, assumed to be in external .js files)
        // This inline script is just for demonstration and initialization.
        const nakshatraData = {1:{name:"Ashwini",element:"fire"},2:{name:"Bharani",element:"earth"},3:{name:"Krittika",element:"fire"},4:{name:"Rohini",element:"earth"},5:{name:"Mrigashira",element:"air"},6:{name:"Ardra",element:"water"},7:{name:"Punarvasu",element:"air"},8:{name:"Pushya",element:"water"},9:{name:"Ashlesha",element:"water"},10:{name:"Magha",element:"fire"},11:{name:"Purva Phalguni",element:"fire"},12:{name:"Uttara Phalguni",element:"fire"},13:{name:"Hasta",element:"earth"},14:{name:"Chitra",element:"air"},15:{name:"Swati",element:"air"},16:{name:"Vishakha",element:"fire"},17:{name:"Anuradha",element:"earth"},18:{name:"Jyeshtha",element:"earth"},19:{name:"Mula",element:"water"},20:{name:"Purva Ashadha",element:"water"},21:{name:"Uttara Ashadha",element:"earth"},22:{name:"Shravana",element:"air"},23:{name:"Dhanishtha",element:"fire"},24:{name:"Shatabhisha",element:"water"},25:{name:"Purva Bhadrapada",element:"fire"},26:{name:"Uttara Bhadrapada",element:"water"},27:{name:"Revati",element:"water"}};
        const nakshatraSvgPaths = {1:'<path d="M30,30 Q50,10 70,30 Q80,50 70,70 Q50,90 30,70 Q20,50 30,30"/>',2:'<ellipse cx="50" cy="50" rx="20" ry="30"/>',3:'<line x1="30" y1="30" x2="70" y2="70"/><line x1="30" y1="70" x2="70" y2="30"/>',4:'<rect x="30" y="30" width="40" height="40"/>',5:'<path d="M30,50 Q50,20 70,50 Q50,80 30,50"/>',6:'<path d="M50,30 Q70,50 50,70 Q30,50 50,30"/>',7:'<path d="M30,50 L70,50 M50,30 L50,70"/>',8:'<circle cx="50" cy="50" r="20"/>',9:'<path d="M30,70 Q50,30 70,70"/>',10:'<rect x="35" y="35" width="30" height="30"/>',11:'<line x1="30" y1="70" x2="70" y2="70"/><line x1="30" y1="70" x2="30" y2="30"/><line x1="70" y1="70" x2="70" y2="30"/>',12:'<rect x="30" y="30" width="40" height="40"/>',13:'<path d="M30,50 L70,50 M30,40 L70,40 M30,60 L70,60"/>',14:'<polygon points="50,20 60,40 80,40 65,55 70,75 50,65 30,75 35,55 20,40 40,40"/>',15:'<path d="M50,30 Q60,50 50,70"/>',16:'<path d="M30,70 L50,30 L70,70"/>',17:'<path d="M50,30 C70,40 70,60 50,70 C30,60 30,40 50,30"/>',18:'<path d="M40,30 L60,30 L60,70 L40,70 Z"/>',19:'<path d="M30,30 Q50,50 30,70 M70,30 Q50,50 70,70"/>',20:'<path d="M30,40 Q50,20 70,40 Q50,60 30,40"/>',21:'<path d="M40,30 C60,40 60,60 40,70"/>',22:'<path d="M30,50 C40,30 60,30 70,50 C60,70 40,70 30,50"/>',23:'<circle cx="50" cy="50" r="15"/>',24:'<circle cx="50" cy="50" r="20"/>',25:'<line x1="30" y1="70" x2="30" y2="30"/><line x1="70" y1="70" x2="70" y2="30"/>',26:'<line x1="30" y1="70" x2="70" y2="70"/><line x1="30" y1="70" x2="30" y2="30"/><line x1="70" y1="70" x2="70" y2="30"/>',27:'<path d="M30,40 Q50,20 70,40 M30,60 Q50,80 70,60"/>'};
        const elementIcons = { earth: '<i class="fas fa-mountain"></i>', water: '<i class="fas fa-water"></i>', fire: '<i class="fas fa-fire"></i>', air: '<i class="fas fa-wind"></i>', ether: '<i class="fas fa-star"></i>' };

        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const nakshatraNum = urlParams.get('nakshatra');
            const guna1 = urlParams.get('guna1');
            const guna3 = urlParams.get('guna3');
            
            if (nakshatraNum && nakshatraData[nakshatraNum]) {
                const nakshatra = nakshatraData[nakshatraNum];
                document.getElementById('character-name').textContent = nakshatra.name;
                document.getElementById('nakshatra-name-display').textContent = nakshatra.name;
                document.getElementById('character-symbol-svg').innerHTML = nakshatraSvgPaths[nakshatraNum] || '';
                
                const elementDisplay = document.getElementById('element-display');
                elementDisplay.innerHTML = `<div class="element-icon">${elementIcons[nakshatra.element]}</div><div class="element-name">${nakshatra.element}</div>`;
                elementDisplay.className = `element-indicator element-${nakshatra.element}`;
                
                setGunaValues(guna1, guna3);
            }
            
            const menuButton = document.getElementById('menu-button');
            const menuModal = document.getElementById('game-menu-modal');
            const closeModalButton = menuModal.querySelector('.close-modal');
            
            menuButton.addEventListener('click', (e) => { e.preventDefault(); menuModal.classList.add('active'); });
            closeModalButton.addEventListener('click', () => menuModal.classList.remove('active'));
            menuModal.addEventListener('click', (e) => { if (e.target === menuModal) menuModal.classList.remove('active'); });
        });

        function setGunaValues(guna1, guna3) {
            let sattva = 1, rajas = 1, tamas = 1;
            if (guna1 === 'Sattva') sattva++; if (guna1 === 'Rajas') rajas++; if (guna1 === 'Tamas') tamas++;
            if (guna3 === 'Sattva') sattva++; if (guna3 === 'Rajas') rajas++; if (guna3 === 'Tamas') tamas++;
            document.getElementById('sattva-value').textContent = sattva;
            document.getElementById('rajas-value').textContent = rajas;
            document.getElementById('tamas-value').textContent = tamas;
        }
    </script>
    <style>
        /* THEME & SETUP */
        :root {
            --color-bg: #0F0C08; --color-surface: #1a140f; --color-border: #4a3422;
            --color-primary-glow: #ffc58f; --color-primary-base: #e09658; --color-text: #dcd1c7;
            --color-text-muted: #918070; --font-body: 'Jost', sans-serif; --font-title: 'Cinzel', serif;
            --shadow-glow: 0 0 15px -3px var(--color-primary-base);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background-color: var(--color-bg);
            background-image: radial-gradient(circle at top left, rgba(224, 150, 88, 0.08), transparent 40%),
                              radial-gradient(circle at bottom right, rgba(169, 113, 66, 0.1), transparent 50%);
            font-family: var(--font-body); color: var(--color-text); min-height: 100vh;
            line-height: 1.6; overflow: hidden;
        }
        
        /* CURSOR & TRANSITIONS */
        .custom-cursor-active { cursor: none; }
        #cursor-container { display: none; position: fixed; top: -16px; left: -16px; pointer-events: none; z-index: 9999; transition: transform 0.1s ease-out; }
        .custom-cursor-active #cursor-container { display: block; }
        #cursor-container .chakra-cursor { transition: all 0.3s ease; }
        #cursor-container.active .chakra-cursor { transform: scale(1.5); stroke: var(--color-primary-glow); filter: drop-shadow(0 0 5px var(--color-primary-glow)); }
        .page-transition { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--color-bg); z-index: 10000; display: flex; justify-content: center; align-items: center; pointer-events: none; opacity: 0; transition: opacity 0.8s ease-in-out; }
        .page-transition.active { opacity: 1; }
        .page-transition-mandala { width: 150px; height: 150px; animation: spin 20s linear infinite, fadeIn 1s ease-out; }
        .page-transition.active .page-transition-mandala { animation: spin 20s linear infinite, scaleUp 1.5s ease-in-out forwards; }

        /* NAVIGATION */
        .nav-bar { position: fixed; top: 0; left: 0; width: 100%; display: flex; justify-content: space-between; align-items: center; padding: 1rem 2rem; background-color: rgba(15, 12, 8, 0.7); backdrop-filter: blur(12px); z-index: 50; border-bottom: 1px solid var(--color-border); box-shadow: 0 4px 30px rgba(0, 0, 0, 0.2); }
        .nav-link { display: flex; flex-direction: column; align-items: center; color: var(--color-text-muted); text-decoration: none; transition: all 0.3s ease; font-size: 0.8rem; }
        .nav-link:hover { color: var(--color-primary-glow); transform: translateY(-2px); }
        .nav-link i { font-size: 1.2rem; margin-bottom: 0.25rem; }
        .nav-title { font-family: var(--font-title); font-size: 2rem; font-weight: 700; color: var(--color-primary-glow); text-shadow: 0 0 10px var(--color-primary-base); }
        
        /* GAME LAYOUT */
        .game-wrapper { display: grid; grid-template-columns: 2fr 1fr; gap: 2rem; padding: 100px 2rem 2rem; height: 100vh; }
        main { display: flex; flex-direction: column; }
        aside { display: flex; flex-direction: column; gap: 1.5rem; overflow-y: auto; padding-right: 1rem; }
        
        /* STORY CONTAINER */
        #story-container.card { background: linear-gradient(145deg, rgba(26, 20, 15, 0.6), rgba(5, 4, 3, 0.6)); border: 1px solid var(--color-border); border-radius: 16px; padding: 2.5rem; backdrop-filter: blur(10px); box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4); flex-grow: 1; overflow-y: auto; position: relative; }
        #story-text p { margin-bottom: 1rem; font-size: 1.1rem; line-height: 1.8; }
        .highlight-text { color: var(--color-primary-glow); font-weight: bold; }
        .mandala-decoration { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 100%; height: 100%; z-index: -1; opacity: 0.05; pointer-events: none; }
        .mandala-decoration svg circle { stroke: var(--color-primary-base); fill: none; stroke-width: 0.5; }
        
        /* CHOICE BUTTONS */
        #choices-container { margin-top: 1.5rem; }
        .choice-button { display: flex; align-items: center; gap: 1.5rem; text-align: left; background: transparent; border: 1px solid var(--color-border); color: var(--color-text); padding: 1rem 1.5rem; margin-bottom: 1rem; border-radius: 10px; transition: all 0.3s ease; width: 100%; }
        .choice-button:hover { background-color: rgba(224, 150, 88, 0.1); box-shadow: 0 0 20px rgba(224, 150, 88, 0.1); transform: translateY(-3px); border-color: var(--color-primary-base); }
        .choice-icon { min-width: 40px; height: 40px; border-radius: 50%; background: rgba(169, 113, 66, 0.1); display: flex; align-items: center; justify-content: center; font-size: 1.2rem; color: var(--color-primary-glow); transition: all 0.3s ease; }
        .choice-button:hover .choice-icon { transform: scale(1.1); }
        .choice-button.choice-selected { border-color: var(--color-primary-glow); box-shadow: var(--shadow-glow); transform: scale(1.02); }
        
        /* SIDEBAR & STATS */
        .sidebar-panel { background: rgba(26, 20, 15, 0.6); border: 1px solid var(--color-border); border-radius: 12px; padding: 1.5rem; }
        .character-summary { text-align: center; }
        .character-symbol { width: 100px; height: 100px; margin: 0 auto 1rem; }
        .character-symbol svg { width: 100%; height: 100%; stroke: var(--color-primary-glow); stroke-width: 1.5; fill: none; filter: drop-shadow(0 0 10px var(--color-primary-base)); animation: pulse 4s infinite ease-in-out; }
        .character-name { font-family: var(--font-title); font-size: 2.2rem; color: var(--color-primary-glow); }
        .status-panel-title { font-family: var(--font-title); font-size: 1.3rem; color: var(--color-primary-base); margin-bottom: 1rem; text-align: center; border-bottom: 1px solid var(--color-border); padding-bottom: 0.5rem; }
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
        .stat-item { display: flex; justify-content: space-between; align-items: center; background: rgba(15, 12, 8, 0.5); padding: 0.5rem 1rem; border-radius: 8px; font-size: 0.9rem; }
        .stat-label { color: var(--color-text-muted); }
        .stat-value { font-weight: bold; font-family: var(--font-title); color: var(--color-primary-glow); }
        .element-indicator { text-align: center; text-transform: capitalize; }
        .element-icon { font-size: 2rem; margin-bottom: 0.5rem; color: var(--color-primary-base); }
        #inventory-list { list-style: none; }
        .inventory-empty { color: var(--color-text-muted); font-style: italic; text-align: center; padding: 1rem 0; }
        .game-controls { margin-top: auto; }
        .action-button { width: 100%; font-family: var(--font-title); font-size: 1rem; color: var(--color-primary-glow); background: transparent; border: 1px solid var(--color-border); border-radius: 8px; padding: 0.8rem 2rem; transition: all 0.3s ease; }
        .action-button:hover { background: rgba(224, 150, 88, 0.1); border-color: var(--color-primary-base); box-shadow: var(--shadow-glow); }
        
        /* MODAL */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(15, 12, 8, 0.7); backdrop-filter: blur(10px); z-index: 100; justify-content: center; align-items: center; }
        .modal.active { display: flex; animation: fadeIn 0.5s ease; }
        .modal-content { background: linear-gradient(145deg, var(--color-surface), #050403); border: 1px solid var(--color-border); border-radius: 12px; width: 90%; max-width: 500px; box-shadow: 0 10px 40px rgba(0,0,0,0.5); }
        .modal-header { padding: 1.5rem; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--color-border); }
        .modal-header h2 { font-family: var(--font-title); color: var(--color-primary-glow); font-size: 1.8rem; margin: 0; }
        .close-modal { color: var(--color-text-muted); font-size: 2rem; transition: all 0.3s ease; cursor: pointer; }
        .close-modal:hover { color: var(--color-primary-glow); transform: rotate(90deg); }
        .modal-body { padding: 1.5rem; }
        .menu-buttons { display: flex; flex-direction: column; gap: 1rem; }
        .menu-button { display: flex; align-items: center; gap: 1rem; background: transparent; border: 1px solid var(--color-border); color: var(--color-text); padding: 1rem 1.5rem; border-radius: 8px; transition: all 0.3s ease; text-align: left; width: 100%; font-size: 1rem; }
        .menu-button:hover { background-color: rgba(224, 150, 88, 0.1); border-color: var(--color-primary-base); }
        .menu-button i { color: var(--color-primary-glow); }
        
        /* ANIMATIONS */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes scaleUp { from { transform: scale(1); opacity: 1; } to { transform: scale(10); opacity: 0; } }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }

        /* RESPONSIVE */
        @media (max-width: 900px) {
            .game-wrapper { grid-template-columns: 1fr; grid-template-rows: auto auto; height: auto; }
            aside { border-top: 1px solid var(--color-border); padding-top: 2rem; margin-top: 2rem; }
        }
    </style>
</body>
</html>
